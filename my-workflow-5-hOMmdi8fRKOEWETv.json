{"updatedAt":"2025-10-20T17:38:39.000Z","createdAt":"2025-10-20T11:28:50.119Z","id":"hOMmdi8fRKOEWETv","name":"My workflow 5","active":false,"isArchived":false,"nodes":[{"parameters":{"dataType":"binary","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1.1,"position":[1456,208],"id":"08cfab27-9b9a-4024-b53d-9ab5958fd672","name":"Default Data Loader"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[1248,608],"id":"54f4e563-a29b-4f77-b224-c8a15dd048ad","name":"Embedding model","credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{"options":{"systemMessage":"# Knowledge Store Agent System Prompt\n\nYou are a data analysis agent that retrieves and analyzes information from a vector store to answer user questions.\n\n## Your Task\n\n1. **Search the vector store** - Use similarity search to find relevant documents and data\n2. **Analyze the results** - Understand what the retrieved data tells you\n3. **Provide clear answers** - Give helpful responses based on the data you found\n\n## How to Work with Vector Data\n\n### Search Process\n- Use the user's question to search for similar content\n- Retrieve multiple relevant chunks of data\n- Look for patterns and connections across the results\n- Consider both exact matches and conceptually similar information\n\n### Analysis Guidelines\n- Read through all retrieved documents carefully\n- Identify key information that answers the user's question\n- Note any conflicting or incomplete information\n- Look for trends, patterns, or insights in the data\n\n### Response Format\n- Start with a direct answer to the user's question\n- Support your answer with specific information from the data\n- Cite which documents or sources your information comes from\n- Be clear about what you found and what you didn't find\n\n## Response Guidelines\n\n### When You Find Good Data\n- Give a confident, detailed answer\n- Include relevant quotes or data points\n- Explain how the information relates to their question\n- Offer additional insights if available\n\n### When Data is Limited\n- Be honest about what information is available\n- Share what you did find, even if partial\n- Suggest related questions you could help with\n- Don't make up information not in the data\n\n### When No Relevant Data is Found\n- Clearly state that you couldn't find relevant information\n- Suggest alternative ways to phrase the question\n- Offer to search for related topics\n\n## Key Principles\n\n- Always base answers on the retrieved data\n- Be transparent about your sources\n- Admit when information is unclear or missing\n- Help users understand what the data shows\n- Ask clarifying questions if the user's request is vague\n\nRemember: Your strength is finding and explaining information that already exists in the vector store. Focus on being accurate and helpful with the data you can retrieve."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1968,-16],"id":"47dc7d39-dc9a-4be3-95cf-977d7f3cbc58","name":"AI Agent"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.3,"position":[1760,-16],"id":"6279ef89-24f6-4a07-ab75-7ebc288a8095","name":"When chat message received","webhookId":"ddf4ea5b-94fc-4fbf-b856-95d39a04eb59"},{"parameters":{"model":{"__rl":true,"value":"gpt-5-mini","mode":"list","cachedResultName":"gpt-5-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1872,192],"id":"7ef61459-4ce7-462a-98f6-a82538a7cc33","name":"Model","credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[2016,192],"id":"28044261-9908-4a77-aa74-a8d215682a39","name":"Simple Memory"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1tRtFuuXGAwV6dcvKuaejDjucwrLzn7ox","mode":"list","cachedResultName":"A_RAG","cachedResultUrl":"https://drive.google.com/drive/folders/1tRtFuuXGAwV6dcvKuaejDjucwrLzn7ox"},"event":"watchFolderUpdated"},"type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[944,-16],"id":"d7109dd0-ad79-4139-a391-7ed70217e45b","name":"File uploaded","credentials":{"googleDriveOAuth2Api":{"id":"i9ySFF086TyukTDr","name":"Google Drive account Bestfranquicias"}}},{"parameters":{"content":"### Embeddings\n\nThe Insert and Retrieve operation use the same embedding node.\n\nThis is to ensure that they are using the **exact same embeddings and settings**.\n\nDifferent embeddings might not work at all, or have unintended consequences.\n","height":240,"width":320,"color":4},"type":"n8n-nodes-base.stickyNote","position":[1376,608],"typeVersion":1,"id":"57ce2a1e-9835-44fe-a42c-8671dd3dad6b","name":"Sticky Note3"},{"parameters":{"mode":"insert","memoryKey":{"__rl":true,"value":"vector_store_key","mode":"list","cachedResultName":"vector_store_key"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreInMemory","typeVersion":1.3,"position":[1344,-16],"id":"90e8dbdb-d7f7-4976-8fad-1487683aea46","name":"Insert documents"},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"Use this tool to retrieve any information required.","memoryKey":{"__rl":true,"value":"vector_store_key","mode":"list","cachedResultName":"vector_store_key"},"topK":10},"type":"@n8n/n8n-nodes-langchain.vectorStoreInMemory","typeVersion":1.3,"position":[2224,320],"id":"4369499a-4a4c-4681-b5b2-671f8a1c0820","name":"Retrieve documents"},{"parameters":{"content":"## Start here!\n@[youtube](v28IbZyoQEo)","height":320,"width":464,"color":5},"type":"n8n-nodes-base.stickyNote","position":[432,-32],"typeVersion":1,"id":"4ebfdd33-c131-4696-820d-9347545b1b42","name":"Sticky Note1"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"1Mo6znf5dIKmvCyCTOVVWn7TozsdwJgxp","mode":"list","cachedResultName":"TABLA_COMPARATIVA_FRANQUICIA2025.pdf","cachedResultUrl":"https://drive.google.com/file/d/1Mo6znf5dIKmvCyCTOVVWn7TozsdwJgxp/view?usp=drivesdk"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1152,-16],"id":"bd38e96f-c6dd-4499-a51c-5fd1e515415e","name":"Download file","credentials":{"googleDriveOAuth2Api":{"id":"i9ySFF086TyukTDr","name":"Google Drive account Bestfranquicias"}}}],"connections":{"Default Data Loader":{"ai_document":[[{"node":"Insert documents","type":"ai_document","index":0}]]},"Embedding model":{"ai_embedding":[[{"node":"Insert documents","type":"ai_embedding","index":0},{"node":"Retrieve documents","type":"ai_embedding","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"File uploaded":{"main":[[{"node":"Download file","type":"main","index":0}]]},"Retrieve documents":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Download file":{"main":[[{"node":"Insert documents","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"cdf0cad5-b2fd-4109-8496-21b0a7a13434","triggerCount":0,"shared":[{"updatedAt":"2025-10-20T11:28:50.125Z","createdAt":"2025-10-20T11:28:50.125Z","role":"workflow:owner","workflowId":"hOMmdi8fRKOEWETv","projectId":"prlZ3bTXg0wKi0D1"}],"tags":[]}