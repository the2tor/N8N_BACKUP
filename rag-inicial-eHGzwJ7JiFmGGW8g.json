{"updatedAt":"2025-10-21T11:41:37.000Z","createdAt":"2025-10-15T10:30:56.875Z","id":"eHGzwJ7JiFmGGW8g","name":"RAG inicial","active":false,"isArchived":false,"nodes":[{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"documents","mode":"list","cachedResultName":"documents"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[192,96],"id":"e0ca633e-9689-47b1-b4f8-7ec72b619971","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"T3nXrcPYn5GbFuxT","name":"Supabase account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[480,272],"id":"0a63586e-e3f0-4004-aa9c-9efa2afd0b7b","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{"dataType":"binary","textSplittingMode":"custom","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1.1,"position":[192,272],"id":"a5948607-d9de-4c61-928e-50e6390daf7c","name":"Default Data Loader"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[144,416],"id":"74b95086-35a4-4c00-9727-9a53ff146c6f","name":"Recursive Character Text Splitter"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[288,-336],"id":"0594df36-f3b8-411c-8222-171285d30678","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[224,-112],"id":"5ec6dff1-41b6-4be4-a51c-89b5ad203135","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[352,-112],"id":"1520e57e-5062-4127-8108-4350246a2747","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"RJfYPONKqWUiJzDA","name":"Postgres account"}}},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"usa este nodo cuando el usuario haga una consulta desde el chat","tableName":{"__rl":true,"value":"documents","mode":"list","cachedResultName":"documents"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[512,-112],"id":"c9dba4e3-a0a2-47f8-a50c-4755182eea25","name":"Supabase Vector Store1","credentials":{"supabaseApi":{"id":"T3nXrcPYn5GbFuxT","name":"Supabase account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.3,"position":[96,-320],"id":"2d97337e-9434-4dbd-b89d-95957609f09b","name":"When chat message received","webhookId":"4b3a52b3-b86b-4561-b0d6-8acc74c1d76e"},{"parameters":{"options":{"systemMessage":"You are a helpful AI assistant with access to a knowledge store and various tools. You can search documents in the vector store, access files from Google Drive, and query data from Supabase and Postgres databases. Use these tools to provide accurate and helpful responses to user queries."}},"id":"15e15586-f4d5-4913-9f22-d8f195f07aea","name":"Knowledge Store Agent","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1440,-240]},{"parameters":{"driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"1tRtFuuXGAwV6dcvKuaejDjucwrLzn7ox","mode":"list","cachedResultName":"A_RAG","cachedResultUrl":"https://drive.google.com/drive/folders/1tRtFuuXGAwV6dcvKuaejDjucwrLzn7ox"},"options":{}},"id":"7628ece6-b082-4e2c-b45a-baeef6bc6bbd","name":"Google Drive Tool","type":"n8n-nodes-base.googleDriveTool","typeVersion":3,"position":[1440,-16],"credentials":{"googleDriveOAuth2Api":{"id":"i9ySFF086TyukTDr","name":"Google Drive account Bestfranquicias"}}},{"parameters":{"tableId":"documents","dataToSend":"autoMapInputData"},"id":"f5416696-1332-4846-995d-8c9155e5ec3a","name":"Supabase Tool","type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[1568,-16],"credentials":{"supabaseApi":{"id":"T3nXrcPYn5GbFuxT","name":"Supabase account"}}},{"parameters":{"schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_chat_histories","mode":"list","cachedResultName":"n8n_chat_histories"},"columns":{"mappingMode":"defineBelow","value":{"session_id":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('session_id', ``, 'string') }}","message":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message', ``, 'string') }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"session_id","displayName":"session_id","required":true,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"message","displayName":"message","required":true,"defaultMatch":false,"display":true,"type":"object","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"7db1de3f-b7ee-44f7-aca1-32a08ac69654","name":"Postgres Tool","type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[1696,-16],"credentials":{"postgres":{"id":"RJfYPONKqWUiJzDA","name":"Postgres account"}}},{"parameters":{"options":{}},"id":"a9461066-be04-4f80-b7c1-989c66bc65f5","name":"OpenAI Embeddings","type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[1904,192],"credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"id":"f352ffb9-d5a7-44f1-9572-25f0bcba7423","name":"OpenAI Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1184,-16],"credentials":{"openAiApi":{"id":"9vlHLfDBsAvR6wrm","name":"OpenAi account"}}},{"parameters":{},"id":"8a4317ee-7a13-4366-93bb-c597356127c4","name":"Postgres Chat Memory1","type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[1312,-16],"credentials":{"postgres":{"id":"RJfYPONKqWUiJzDA","name":"Postgres account"}}},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"usa este nodo cuando el usuario haga una consulta desde el chat","tableName":{"__rl":true,"value":"documents","mode":"list","cachedResultName":"documents"},"topK":5,"options":{}},"id":"8232d48f-460b-4d22-9231-99855df6ff52","name":"Supabase Vector Store2","type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[1824,-16],"credentials":{"supabaseApi":{"id":"T3nXrcPYn5GbFuxT","name":"Supabase account"}}},{"parameters":{"resource":"fileFolder","searchMethod":"query","queryString":"name contains 'becas'","limit":1000,"filter":{},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[-160,96],"id":"a1e1413c-bf99-490e-88a6-14de0330910a","name":"Search files and folders","credentials":{"googleDriveOAuth2Api":{"id":"i9ySFF086TyukTDr","name":"Google Drive account Bestfranquicias"}}}],"connections":{"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0},{"node":"Supabase Vector Store1","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Recursive Character Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Supabase Vector Store":{"main":[[]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Supabase Vector Store1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Google Drive Tool":{"ai_tool":[[{"node":"Knowledge Store Agent","type":"ai_tool","index":0}]]},"Supabase Tool":{"ai_tool":[[{"node":"Knowledge Store Agent","type":"ai_tool","index":0}]]},"Postgres Tool":{"ai_tool":[[{"node":"Knowledge Store Agent","type":"ai_tool","index":0}]]},"OpenAI Embeddings":{"ai_embedding":[[{"node":"Supabase Vector Store2","type":"ai_embedding","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Knowledge Store Agent","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory1":{"ai_memory":[[{"node":"Knowledge Store Agent","type":"ai_memory","index":0}]]},"Supabase Vector Store2":{"ai_tool":[[{"node":"Knowledge Store Agent","type":"ai_tool","index":0}]]},"Search files and folders":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"e0e20cae-b5be-4bc7-9608-5e184b7a5c7b","triggerCount":0,"shared":[{"updatedAt":"2025-10-15T10:30:56.877Z","createdAt":"2025-10-15T10:30:56.877Z","role":"workflow:owner","workflowId":"eHGzwJ7JiFmGGW8g","projectId":"prlZ3bTXg0wKi0D1"}],"tags":[]}